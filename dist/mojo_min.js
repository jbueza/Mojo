(function(c,b){var a=function(){};a.controllers={};a.applications={};a.options={};a._loaded=[];a._resolvedNamespace=function(d){return a._namespace._provided[""+d];};a.resolve=function(d){if(!a._namespace._provided[d]){return d.replace(/\./gi,"/");}return false;};a._namespace=function(g){var h=(""+g).split(/\./),k=h.length,j=[],f=window||{};if(!a._namespace._provided){a._namespace._provided={};}if(a._namespace._provided[g]==g){throw new Error(g+" has already been defined.");}for(var e=0;e<k;e+=1){var d=h[e];if(!f[d]){j[e]=d;f[d]=function(){};a._namespace._provided[j.join(".")]=f[d];}f=f[d];}return f;};a.query=function(){return jQuery.apply(this,arguments);};a.queryFirst=function(){return a.query.apply(this,arguments)[0];};a.require=function(h,l){if(!$.isArray(h)){h=[h];}var k=h.length,m,g=0;var d=a.controllers;for(var f=0;f<k;f++){var j=h[f];m=a.options.baseSrc+a.resolve(j)+".js";a._loaded.push(j);$.getScript(m,function(){g++;});}var e=setInterval(function(){if(l&&g==k){clearInterval(e);l.call(this);}},25);};a.fetch=function(d,e){$.getScript(d,function(){if(e){e.apply(this,arguments);}});};a.define=function(e,d){if("function"==typeof d){d=d.call(this);}if(typeof e=="string"){a._namespace(e);a._loaded[e]=d;a.controllers[e]=d;}};a.create=function(d){if(typeof d=="undefined"){d={};if(!d.baseSrc){d.baseSrc="js/";}if(!d.mojoSrc){d.mojoSrc="../src";}}$.extend(this.options,d);return new Application();};a.extend=function(){var d=function(){};return function(f,e){d.prototype=e.prototype;f.prototype=new d();f.__super__=e.prototype;f.prototype.constructor=f;};};window.MOJO=a;})(window,document);MOJO.define("Request",function(){function a(e,b,d,c){this.paramsObj=e;this.callerObj=b;this.eventObj=d;this.controllerObj=c;}a.prototype.getController=function(){return this.controllerObj;};a.prototype.getContextElement=function(){return this.getController().getContextElement();};a.prototype.getCaller=function(){return this.callerObj;};a.prototype.getEvent=function(){return this.eventObj;};window.Request=a;return a;});MOJO.define("Controller",function(){function a(){this.contextElement=null;this.controllerClass=null;this.events;}a.prototype.onInit=function(){};a.prototype.onParamChange=function(){};a.prototype.params={};a.prototype.initialize=function(c,d,e){var b=this;b.contextElement=c;b.controllerClass=d;if("undefined"!=typeof e||!e){b.params=e;}$(b.events).each(function(j,i){var g=$(document),l=i[0],f=i[1],h=i[2],k=i[3];if(l=="context"){g=$(c);}$(g).delegate(f,h,function(m){var n=new Request({},this,m,b);if(typeof b.before!="undefined"&&typeof b.before[k]!="undefined"){b.before[k].call(b,n);}b.methods[k].call(MOJO.controllers[d],n);if(typeof b.after!="undefined"&&typeof b.after[k]!="undefined"){b.after[k].call(b,n);}});});b.onInit();};a.prototype.getContextElement=function(){if(!this.contextElement){return null;}return this.contextElement;};a.prototype.param=function(b,c){if("undefined"==typeof this.params){this.params={};}if(arguments.length>1){this.params[b]=c;this.onParamChange();return this;}else{return this.params[b];}};window.Controller=a;return a;});MOJO.define("Application",function(){function d(){if(!this.options){this.options={};}var f=this,g=f.options;g.locale="en_CA";g.plugins=[];g.pluginSrc="js/lib/plugins/";g.environment="dev";g.selector=jQuery||(function(){throw new Error("Unable to find jQuery");})();f.siteMap=[];}d.prototype.onComplete=function(){};d.prototype.configure=function(f,h){if(arguments.length>1){this.options[f]=h;if(this.options.environment=="dev"){try{console.info("Configure: ",f," -> ",h);}catch(g){}}return this;}else{return this.options[f];}};d.prototype.map=function b(f,i){var g=this;var h=$(f);h.each(function(j,k){g.siteMap.push({context:k,init:i});});if("function"==typeof i){i.call(this,g);}return this;};d.prototype.setupController=function(g,f,k){var i=$(g);var h=MOJO.controllers[f];var j=new Controller(),h=$.extend(h,h.methods),h=$.extend(h,j);MOJO.controllers[f]=h;if(typeof h=="undefined"){throw new Error("Undefined Controller @ ",f);}h.initialize(g,f,k);if("undefined"==typeof g.mojoControllers){g.mojoControllers=[];}g.mojoControllers.push({controller:h});if(typeof h.after!="undefined"&&h.after.Start!="undefined"){h.after.Start.call(h,null);}};d.prototype.disconnectController=function c(g,f,h){};d.prototype.disconnectControllers=function a(g){var f=this;$(f.siteMap).each(function(h,i){$(i.context).unbind().undelegate();});if("undefined"!=typeof g&&"function"==typeof g){g.apply(f);}};d.prototype.connectControllers=function e(){var f=this,g=[];$(f.siteMap).each(function(i,h){var j;if("function"==typeof h.init){j=h.init.call(this);}else{j=h.init;}$(j).each(function(k,l){if(!MOJO.controllers.hasOwnProperty(l.controller)){g.push(l.controller);}else{MOJO._loaded[l.controller]=l.controller;}});});if(f.options.environment=="dev"){MOJO.require($.unique(g),function(){$(f.siteMap).each(function(i,h){if(f.options.environment=="dev"){try{console.log("Mapping ["+i+"]: ",h.context);}catch(k){}}var j=("function"==typeof h.init)?h.init.call(this):h.init;$(j).each(function(l,m){f.setupController(h.context,m.controller,m.params);});});});}};d.prototype.getPlugins=function(g,i){var f=this,h=f.options.pluginSrc;if(!g.async){$.ajaxSetup({async:false});}$(f.options.plugins).each(function(j,k){MOJO.fetch(h+k+".js");});if(!g.async){$.ajaxSetup({async:true});}if("undefined"!=typeof i&&"function"==typeof i){i.call(f);}};d.prototype.start=function(){var f=this;$(document).ready(function(){f.disconnectControllers(function(){if(f.options.plugins.length){f.getPlugins(function(){f.connectControllers();});}else{f.connectControllers();}f.onComplete();});});};d.prototype.remap=function(){var f=this;f.disconnectControllers(function(){f.connectControllers();f.onComplete();});};d.prototype.destroy=function(){delete this;return this;};("undefined"==typeof window)?process.Application=d:window.Application=d;window.Application=d;return d;});MOJO.define("Service",function(){function a(c,d,b){if(typeof b=="undefined"){b={};}var e={method:b.method||function(){var f="get";if(c.match(/^get/i)){f="get";}else{if(c.match(/^add|del|update/i)){f="post";}}return f;}(),template:false};this.name=c;this.uri=d;this.options=$.extend({},e,b);}a.prototype.invoke=function(g,i,e){var b=this;var d=this.getOptions()||{},h=d.method,f=b.getURI(),c=d.responseType||"JSON";if(d.template){f=b.parse(f,g);if(h=="get"){g=null;}}$.ajaxSetup({dataTypeString:c,type:h,async:d.async||"true",cache:d.cache||"false",contentType:d.contentType||"application/json; charset=utf-8"});$.ajax({url:f,data:g}).success(function(j){if(c=="JSON"&&this.contentType.match(/javascript/g)){j=$.parseJSON(j);}if("undefined"!=typeof i){if(typeof i=="function"){i.call(e,null,j);}else{e[i](null,j);}}}).error(function(){if("undefined"!=typeof i){i.call(e,"Unable to execute XHR",arguments);}});};a.prototype.getName=function(){return this.name;};a.prototype.getURI=function(){return this.uri;};a.prototype.getOptions=function(){return this.options;};a.prototype.option=function(){if(arguments.length>1){this.options[arguments[0]]=arguments[1];return this;}else{return this.options[arguments[0]];}};a.prototype.parse=function(b,c){$.each(c,function(d,e){b=b.split("{"+d+"}").join(e);});return b;};window.Service=a;return a;});MOJO.define("ServiceLocator",function(){var a={services:{},addService:function(b){this.services[b.name]=b;return this;},getService:function(b){return this.services[b];},removeService:function(b){delete this.services[b];},removeServices:function(){this.services={};}};window.ServiceLocator=a;return a;});